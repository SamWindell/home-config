#!/usr/bin/env python3

from pathlib import Path
from wezterm_setup_core import Project, WeztermSetupBuilder

if __name__ == "__main__":
    project = Project(project_dir=Path.home() / "Projects" / "floe")
    builder = WeztermSetupBuilder(project)

    pane0 = builder.ensure_wezterm_running("nix develop")
    builder.set_pane_title(pane0, "Editor")
    builder.send_text(pane0, "nvim\n")

    pane1 = builder.spawn_pane(pane0, command="nix develop")
    builder.set_pane_title(pane1, "Docs Server")
    builder.send_text(pane1, "cd docs\n")
    builder.send_text(pane1, "mdbook serve\n")

    pane2 = builder.spawn_pane(pane0, command="nix develop")
    builder.set_pane_title(pane2, "Shell")

    builder.activate_pane(pane0)
